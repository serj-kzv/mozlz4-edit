<form [formGroup]="engineForm">
    <div class="add-engine-sub-block">
        <label>
            Name
            <input type="text" formControlName="name">
        </label>
    </div>
    <div class="add-engine-sub-block">
        <label>
            <div>URL</div>
            <input type="text" formControlName="url">
        </label>
    </div>
    <div class="add-engine-sub-block">
        <div>
            <label>
                <div>Icon</div>
                <input type="text" formControlName="icon" #icon>
            </label>
        </div>
        <div>
            <img class="engine-add-icon-input-img"
                 [src]="domSanitizer.bypassSecurityTrustResourceUrl(engineForm.controls['icon'].value)" width="23"
                 height="23">
            <input type="text" formControlName="iconTxt" placeholder="Icon text">
            <button (click)="engineForm.patchValue({icon:'', iconTxt: ''})">Clear icon</button>
            <label class="file-label">
                <span>Pick icon</span>
                <input (change)="pickIcon($event.target)" type="file"
                       accept=".png,.icon,.ico,.svg,.jpg,.jpeg,.bpm,.gif,.xpm">
            </label>
            <button (click)="add()">Add</button>
        </div>
    </div>
    <div *ngIf="engine.params" class="add-engine-param-block">
        <div *ngFor="let param of engine.params; index as i">
            {{param.name}} {{param.param}}
            <div *ngIf="!param.multiAnd && !param.multiOr">
                <select #multiSelect [attr.data-multi]="false" id="multiSelectIdx{{i}}" multiple="multiple" name="multi_select{{i}}">
                    <option *ngFor="let value of param.values; index as i" value="{{value.value}}">{{value.name}}</option>
                </select>
            </div>
            <div *ngIf="param.multiAnd">
                <select #multiSelect [attr.data-multi]="true" id="multiSelectAndIdx{{i}}" multiple="multiple" name="multi_select_and{{i}}">
                    <option *ngFor="let value of param.values; index as i" value="{{value.value}}">{{value.name}}</option>
                </select>
            </div>
            <div *ngIf="param.multiOr">
                <select #multiSelect [attr.data-multi]="true" id="multiSelectOrIdx{{i}}" multiple="multiple" name="multi_select_or{{i}}">
                    <option *ngFor="let value of param.values; index as i" value="{{value.value}}">{{value.name}}</option>
                </select>
            </div>
        </div>
    </div>
</form>
